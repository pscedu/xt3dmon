.\" $Id$
.Dd July 26, 2005
.Dt XT3DMON 1
.Os http://www.psc.edu/
.Sh NAME
.Nm xt3dmon
.Nd XT3 monitor
.Sh SYNOPSIS
.Nm xt3dmon
.Op Fl alp
.Sh DESCRIPTION
.Nm
is a 3D program that graphically displays the various attributes of the
of the Cray
.Tn XT3
Redstorm cluster.
At regular intervals, the data are re-read and the display is
updated to reflect what is happening in reality.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl a
Enable active stereo mode.
In this mode, if the video hardware supports it,
.Nm
will manage buffers for both the left and right eyes to be
overlaid on the same window.
.It Fl l
Enable
.Dq live
mode \(em that is, establish a live connection to the
.Li sdb
database and query data in realtime.
A connection is made to the local host to port 3306.
It is assumed that this port is being SSH-forwarded to a host inside
the XT3 network, with a command such as:
.Pp
.Dl $ ssh -NfL 3306:sdb:3306 phantom.psc.edu
.It Fl p
Enable passive stereo mode.
In this mode, two windows are created and maintained individually,
for use by a stereo projector overlaying the right side of the
available screen space with the left.
.El
.Pp
There are three data modes available, which help visualize the state
of the machine.
In job mode, cluster nodes may be in any of the following states,
differentiated by color and/or texture:
.Pp
.Bl -tag -width "Disabled (PBS)" -offset indent -compact
.It Free
The node is available.
.It Disabled (PBS)
The node is administratively disabled and is not allocated by PBS.
.It Disabled (HW)
The node is disabled in the physical map (hardware).
.It Used
The node is in use by a job.
.It Service
The node is a service node, not a compute node.
.It Unaccounted
The node is not accounted for in the physical map.
.It Bad
The node has failed required probe tests.
.It Checking
The node is currently being probe tested.
.El
.Pp
The failure and temperature modes work similarly.
The legend panel may be activated (see the
.Ic pl
command) to display all possible node states in each
mode.
.Pp
The following key bindings are available:
.Bl -tag -width Ds -offset indent
.It left, right, up, down
Pan the camera along its
.Em x Ns / Ns Em y Ns / Ns
viewing lines (left, right, forward, and backward).
.Em z
.It pageup, pagedown
Pan vertically (perpendicularly) along the camera viewing line
(up and down).
.It left click
Click a node for extended information.
Hold shift and click to add nodes to the selection.
Hold control and click to remove nodes from the selection.
.Pp
While holding control, scroll the mouse to revolve around the cluster
view.
.Pp
While holding shift, scroll the mouse to rotate the theta and phi of the
camera view.
.It Ic C
Redraw the cluster.
.It Ic c
Clear the selected node(s).
.It Ic fc
Empty the flyby data file.
By default, enabling recording consecutively will append flyby states to
the file.
.It Ic fl
Toggle the looping of flyby playback.
.It Ic fp
Playback a previously recorded flyby.
Press any key to break out of playback mode.
.It Ic fq
Toggle the recording and saving of the live state, for use in flyby
playbacks.
.It Ic mf
Switch to failure data mode.
.It Ic mj
Switch to job data mode (default).
.It Ic mt
Switch to temperature data mode.
.It Ic O
Return the camera to the origin (0,0,0).
.It Ic ob
Toggle translucency (blending).
.It Ic oD
Toggle drawing to the screen.
.It Ic od
Toggle screen capture.
Files with sequeneced names are written into the
.Pa snaps
directory.
.It Ic oe
Toggle movement interpolation
.Pq Dq tweening .
.It Ic of
Toggle the display of cluster frames in wired view.
.It Ic oG
Toggle the frame rate governor.
.It Ic og
Toggle display of the ground and axes.
.It Ic ol
Toggle the display of node labels.
.It Ic oM
Toggle the display of modules.
.It Ic oP
Toggle the display of pipes to the wired neighbors of any selected nodes.
.It Ic op
Toggle the display of pipes to the wired neighbors of all nodes.
.It Ic ot
Toggle texture mapping.
.It Ic ow
Toggle the display of wireframes around nodes.
.It Ic pa
Toggle all panels.
.It Ic pc
Toggle the command panel.
.It Ic pF
Toggle the flyby overview panel.
.It Ic pf
Toggle the frames-per-second panel.
.It Ic pg
Toggle the goto-node panel.
.It Ic pl
Toggle the legend panel.
.It Ic pm
Toggle the memory usage panel.
.It Ic pn
Toggle the extended node information panel.
.It Ic pp
Toggle the camera position panel.
.It Ic pS
Toggle the status panel.
.It Ic ps
Toggle the screenshot panel.
.It Ic q
Quit.
.It Ic vo
Switch to the wired viewing mode with only one cluster drawn.
.It Ic vp
Switch to the physical viewing mode (default).
.It Ic vw
Switch to the wired viewing mode with the cluster drawn continuously.
.It Xo
.Ic [x , [y , [z ,
.Ic [[ ,
.Ic ]x , ]y , ]z ,
.Ic ]]
.Xc
Adjust the wired viewing mode node spacing factor.
.It Ic + , _
Adjust job node translucency.
.It Ic = , -
Adjust other node translucency.
.El
.Sh FILES
.Bl -tag -width Pa -compact
.It Pa data/texture Ns Em %d Ns Pa .png
node state textures
.It Pa data/font.png
font texture used for node labels
.It Pa data/rtrtrace
physical mapping
.It Pa data/nids_list_phantom
job mapping
.It Pa data/bad_list_phantom
bad list
.It Pa data/to_check_list_phantom
check list
.It Pa data/qstat.out
.Xr qstat 1
output with job infomation
.It Pa data/temps
node temperature data
.It Pa data/fail
node failure data
.It Pa data/flyby.data
flyby data file
.It Pa snaps/ Ns Em %08d Ns Pa .png
capture output files
.El
