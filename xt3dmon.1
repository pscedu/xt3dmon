.\" $Id$
.Dd July 26, 2005
.Dt MON 1
.Os
.Sh NAME
.Nm mon
.Nd XT3 monitor
.Sh SYNOPSIS
.Nm mon
.Op Fl l
.Sh DESCRIPTION
.Nm
is a 3D program that graphically displays the various attributes of the
of the Cray
.Tn XT3
Redstorm cluster.
At regular intervals, the data are re-read and the display is
updated to reflect what is happening in reality.
.Pp
The options are as follows:
.Bl -tag -width Ds
.It Fl l
Enable
.Dq live
mode \(em that is, establish a live connection to the
.Li sdb
database and query data in realtime.
.El
.Pp
There are three data modes available, which help visualize the state
of the machine.
In job mode, cluster nodes may be in any of the following states,
differentiated by color and/or texture:
.Pp
.Bl -tag -width "Disabled (PBS)" -offset indent -compact
.It Free
The node is available.
.It Disabled (PBS)
The node is administratively disabled and is not allocated by PBS.
.It Disabled (HW)
The node is disabled in the physical map (hardware).
.It Used
The node is in use by a job.
.It Service
The node is a service node, not a compute node.
.It Unaccounted
The node is not accounted for in the physical map.
.It Bad
The node has failed required probe tests.
.It Checking
The node is currently being probe tested.
.El
.Pp
The failure and temperature modes work similarly.
The legend panel may be activated to display all possible node states
in each mode.
.Pp
The following key bindings are available:
.Bl -tag -width Ds -offset indent
.It left, right, up, down
Pan along the x/z plane.
.It pageup, pagedown
Pan along the y-axis (up and down).
.It left click
Click a node for extended information.
.Pp
While holding left click, scroll the mouse to revolve around the cluster
view.
.Pp
While holding shift, scroll the mouse to rotate the theta and phi of the
camera view.
.It Ic C
Redraw the cluster.
.It Ic c
Clear the selected node.
.It Ic fc
Empty the flyby data file.
By default, enabling recording consecutively will append flyby states to
the file.
.It Ic fl
Toggle the looping of flyby playback.
.It Ic fp
Playback a previously recorded flyby.
Press any key to break out of playback mode.
.It Ic fq
Toggle the recording and saving of the live state, for use in flyby
playbacks.
.It Ic mf
Switch to failure data mode.
.It Ic mj
Switch to job data mode (default).
.It Ic mt
Switch to temperature data mode.
.It Ic O
Return the camera to the origin (0,0,0).
.It Ic ob
Toggle translucency (blending).
.It Ic oD
Toggle drawing to the screen.
.It Ic od
Toggle screen capture.
Files are written to
.Pa data/dump??.ppm .
.It Ic oe
Toggle movement interpolation
.Pq Dq tweening .
.It Ic of
Toggle the display of cluster frames in wired view.
.It Ic oG
Toggle the frame rate governor.
.It Ic og
Toggle display of the ground and axes.
.It Ic oL
Toggle free look mode, when the look angle is freely controlled by
the control button and the mouse, as opposed to revolution mode.
.It Ic ol
Toggle the display of node labels.
.It Ic oM
Toggle the display of modules.
.It Ic oP
Toggle the display of pipes to the wired neighbors of the selected node.
.It Ic op
Toggle the display of pipes to the wired neighbors of all nodes.
.It Ic oS
Toggle stereo mode.
Stereo mode is used during flyby playback to generate two images from
different positions of the same scene for use on 3D projectors.
.It Ic os
Toggle the dimming of other nodes when a node is selected.
.It Ic ot
Toggle texture mapping.
.It Ic ow
Toggle wireframe.
.It Ic pa
Toggle all panels.
.It Ic pc
Toggle the command panel.
.It Ic pF
Toggle the flyby overview panel.
.It Ic pf
Toggle the frames-per-second panel.
.It Ic pg
Toggle the goto-node panel.
.It Ic pl
Toggle the legend panel.
.It Ic pm
Toggle the memory usage panel.
.It Ic pn
Toggle the extended node information panel.
.It Ic pp
Toggle the camera position panel.
.It Ic pS
Toggle the status panel.
.It Ic ps
Toggle the screenshot panel.
.It Ic q
Quit.
.It Ic vo
Switch to the wired viewing mode with only one cluster drawn.
.It Ic vp
Switch to the physical viewing mode (default).
.It Ic vw
Switch to the wired viewing mode with the cluster drawn continuously.
.It Xo
.Ic [x , [y , [z ,
.Ic [[ ,
.Ic ]x , ]y , ]z ,
.Ic ]]
.Xc
Adjust the wired viewing mode node spacing factor.
.It Ic + , _
Adjust job node translucency.
.It Ic = , -
Adjust other node translucency.
.El
.Sh FILES
.Bl -tag -width Pa -compact
.It Pa data/texture Ns Em %d Ns Pa .png
node state textures
.It Pa data/rtrtrace
physical mapping
.It Pa data/nids_list_phantom
job mapping
.It Pa data/bad_list_phantom
bad list
.It Pa data/to_check_list_phantom
check list
.It Pa data/temps
node temperature data
.It Pa data/fail
node failure data
.It Pa data/flyby.data
flyby data file
.It Pa ppm/ Ns Em %06d Ns Pa .png
capture output files
.El
